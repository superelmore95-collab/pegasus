<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Explore | PEGASUS</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* DAZN-style Explore Page */
    .explore-hero {
      height: 70vh;
      min-height: 500px;
      position: relative;
      overflow: hidden;
      margin-top: 40px;
    }
    
    .explore-hero .slide {
      background-size: cover;
      background-position: center;
    }
    
    .explore-hero .slide-content {
      bottom: 100px;
      left: 40px;
      max-width: 50%;
      text-align: left;
    }
    
    .leagues-section {
      padding: 60px 0;
    }
    
    .leagues-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .league-card {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      transition: var(--transition);
    }
    
    .league-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }
    
    .league-logo {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin: 0 auto 15px;
    }

    .upcoming-events {
      padding: 60px 0;
      background: var(--secondary);
    }

    .events-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      overflow-x: auto;
      padding-bottom: 10px;
    }

    .event-tab {
      padding: 10px 20px;
      background: var(--card-bg);
      border-radius: 30px;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
    }

    .event-tab.active {
      background: var(--accent);
      color: #000;
    }

    .events-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .event-card {
      background: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      transition: var(--transition);
    }

    .event-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }

    .event-date {
      padding: 10px 15px;
      background: var(--accent);
      color: #000;
      font-weight: 600;
      text-align: center;
    }

    .event-info {
      padding: 15px;
    }

    .event-teams {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .team {
      text-align: center;
      flex: 1;
    }

    .team-logo {
      width: 50px;
      height: 50px;
      object-fit: contain;
      margin-bottom: 5px;
    }

    .vs {
      font-weight: 600;
      margin: 0 10px;
    }

    .event-league {
      text-align: center;
      color: var(--text-secondary);
      font-size: 12px;
      margin-top: 10px;
    }

    .fight-cards-section {
      padding: 60px 0;
    }

    .fight-card {
      background: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 30px;
    }

    .fight-card-header {
      padding: 15px;
      background: var(--accent);
      color: #000;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .fight-card-content {
      padding: 20px;
    }

    .fight {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .fight:last-child {
      border-bottom: none;
    }

    .fighter {
      text-align: center;
      flex: 1;
    }

    .fighter-name {
      font-weight: 600;
      margin-top: 10px;
    }

    .fighter-record {
      font-size: 12px;
      color: var(--text-secondary);
    }

    .weight-class {
      text-align: center;
      margin: 0 15px;
      color: var(--text-secondary);
      font-size: 12px;
    }

    @media (max-width: 768px) {
      .explore-hero .slide-content {
        max-width: 90%;
        left: 20px;
        text-align: center;
      }
      
      .leagues-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      
      .events-grid {
        grid-template-columns: 1fr;
      }
      
      .event-teams {
        flex-direction: column;
      }
      
      .team {
        margin: 10px 0;
      }
      
      .vs {
        margin: 10px 0;
      }
      
      .fight {
        flex-direction: column;
        text-align: center;
      }
      
      .weight-class {
        margin: 10px 0;
      }
    }
  </style>
</head>
<body>
  <!-- Preloader -->
  <div id="preloader">
    <div class="preloader-content">
      <img src="images/pegasus-logo.png" alt="PEGASUS" class="preloader-logo">
      <div class="loading-circle"></div>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="container">
      <nav class="navbar">
        <a href="index.html" class="logo">
          <img src="images/pegasus-logo.png" alt="PEGASUS Logo">
        </a>
        
        <ul class="nav-links visible-for-guests">
          <li><a href="index.html">Home</a></li>
          <li><a href="explore.html" class="active">Explore</a></li>
        </ul>
        
        <ul class="nav-links hidden-for-guests">
          <li><a href="index.html">Home</a></li>
          <li><a href="explore.html" class="active">Explore</a></li>
          <li><a href="live-streams.html">Live</a></li>
          <li><a href="vod.html">VOD</a></li>
          <li><a href="highlights.html">Highlights</a></li>
          <li><a href="channels.html">Channels</a></li>
          
          <!-- Mobile Auth Buttons (Hidden on Desktop) -->
          <li class="mobile-auth-item">
            <div class="mobile-auth">
              <a href="signin.html" class="btn btn-outline">Sign In</a>
              <a href="signup.html" class="btn">Subscribe</a>
            </div>
          </li>
        </ul>
        
        <!-- Desktop Auth Buttons (Hidden on Mobile) -->
        <div class="auth-buttons" id="auth-buttons">
          <a href="signin.html" class="btn btn-outline">Sign In</a>
          <a href="signup.html" class="btn">Subscribe</a>
        </div>
        
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero Banner -->
  <section class="explore-hero">
    <div style="background-image: url('images/explore-banner.jpg');" class="slide active">
      <div class="slide-overlay"></div>
      <div class="slide-content">
        <h2>Explore All Sports</h2>
        <p>Discover live games, highlights, and channels across all categories</p>
        <a href="#featured" class="btn">Explore Now</a>
        <div class="mini-progress">
          <div class="mini-progress-bar"></div>
        </div>
      </div>
    </div>
    <div class="slider-arrows">
      <div class="arrow prev">
        <i class="fas fa-chevron-left"></i>
      </div>
      <div class="arrow next">
        <i class="fas fa-chevron-right"></i>
      </div>
    </div>
  </section>

  <!-- Content from Backend Section -->
  <section id="featured" class="section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Featured Content</h2>
        <a href="#" class="view-all">View All</a>
      </div>
      
      <div class="stream-grid" id="featured-content">
        <div class="loading-placeholder">
          <div class="loading-spinner"></div>
          <p>Loading featured content...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Leagues Section -->
  <section class="leagues-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Popular Leagues</h2>
        <a href="#" class="view-all">View All</a>
      </div>
      
      <div class="leagues-grid">
        <div class="league-card">
          <img src="images/premier-league.png" alt="Premier League" class="league-logo">
          <div>Premier League</div>
        </div>
        
        <div class="league-card">
          <img src="images/nba.png" alt="NBA" class="league-logo">
          <div>NBA</div>
        </div>
        
        <div class="league-card">
          <img src="images/uefa.png" alt="UEFA" class="league-logo">
          <div>UEFA Champions League</div>
        </div>
        
        <div class="league-card">
          <img src="images/nfl.png" alt="NFL" class="league-logo">
          <div>NFL</div>
        </div>
        
        <div class="league-card">
          <img src="images/formula1.png" alt="Formula 1" class="league-logo">
          <div>Formula 1</div>
        </div>
        
        <div class="league-card">
          <img src="images/ufc.png" alt="UFC" class="league-logo">
          <div>UFC</div>
        </div>
        
        <div class="league-card">
          <img src="images/mlb.png" alt="MLB" class="league-logo">
          <div>MLB</div>
        </div>
        
        <div class="league-card">
          <img src="images/nhl.png" alt="NHL" class="league-logo">
          <div>NHL</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Upcoming Events Section -->
  <section class="upcoming-events">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Upcoming Events</h2>
      </div>
      
      <div class="events-tabs">
        <div class="event-tab active" data-day="today">Today</div>
        <div class="event-tab" data-day="tomorrow">Tomorrow</div>
        <div class="event-tab" data-day="week">This Week</div>
        <div class="event-tab" data-day="month">This Month</div>
      </div>
      
      <div class="events-grid" id="upcoming-events-container">
        <div class="loading-placeholder">
          <div class="loading-spinner"></div>
          <p>Loading upcoming events...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Fight Cards Section -->
  <section class="fight-cards-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">MMA Fight Cards</h2>
        <a href="#" class="view-all">View All</a>
      </div>
      
      <div id="mma-fight-cards-container">
        <div class="loading-placeholder">
          <div class="loading-spinner"></div>
          <p>Loading MMA fight cards...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>PEGASUS</h3>
          <p>The ultimate sports streaming platform with live events, on-demand content, and exclusive coverage.</p>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        
        <div class="footer-column">
          <h3>Navigation</h3>
          <ul class="footer-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="explore.html">Explore</a></li>
            <li><a href="live-streams.html">Live Streams</a></li>
            <li><a href="vod.html">Video On Demand</a></li>
            <li><a href="highlights.html">Highlights</a></li>
            <li><a href="channels.html">Channels</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Legal</h3>
          <ul class="footer-links">
            <li><a href="terms.html">Terms of Service</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
            <li><a href="dmca.html">DMCA Policy</a></li>
            <li><a href="cookie.html">Cookie Policy</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Support</h3>
          <ul class="footer-links">
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="faq.html">FAQs</a></li>
            <li><a href="help.html">Help Center</a></li>
          </ul>
        </div>
      </div>
      
      <div class="copyright">
        &copy; 2023 PEGASUS Sports Streaming. All rights reserved.
      </div>
    </div>
  </footer>

  <script src="js/config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/script.js"></script>
  <script>
    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize mobile menu
      const hamburger = document.querySelector('.hamburger');
      const navLinks = document.querySelector('.nav-links');
      
      if (hamburger && navLinks) {
        hamburger.addEventListener('click', () => {
          hamburger.classList.toggle('active');
          navLinks.classList.toggle('active');
        });
      }
      
      // Load featured content from backend
      loadFeaturedContent();
      
      // Load upcoming events
      loadUpcomingEvents();
      
      // Load MMA fight cards
      loadMMAFightCards();
      
      // Event tabs functionality
      const eventTabs = document.querySelectorAll('.event-tab');
      eventTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          eventTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          const day = this.getAttribute('data-day');
          loadUpcomingEvents(day);
        });
      });
    });
    
    // Load featured content from backend
    async function loadFeaturedContent() {
      try {
        const API_BASE = 'https://pegasus-backend.super-elmore95.workers.dev';
        const container = document.getElementById('featured-content');
        
        // Show loading state
        container.innerHTML = `
          <div class="loading-placeholder">
            <div class="loading-spinner"></div>
            <p>Loading featured content...</p>
          </div>
        `;
        
        const response = await fetch(`${API_BASE}/api/content?limit=8`);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const content = await response.json();
        
        // Clear loading state
        container.innerHTML = '';
        
        // Combine all content types
        const allContent = [
          ...(content.live || []),
          ...(content.vod || []),
          ...(content.highlights || []),
          ...(content.channels || [])
        ];
        
        // Display content
        if (allContent.length === 0) {
          container.innerHTML = '<p class="no-content">No featured content available</p>';
          return;
        }
        
        // Show first 8 items
        allContent.slice(0, 8).forEach(item => {
          const isLive = item.is_live || false;
          const itemType = isLive ? 'live' : (item.type || 'vod');
          const card = document.createElement('a');
          card.href = `player.html?type=${itemType}&id=${item.id}`;
          card.className = 'stream-card';
          
          card.innerHTML = `
            <div class="card-img">
              <img src="${item.thumbnail || item.thumbnail_url || 'https://via.placeholder.com/400x225'}" 
                   alt="${item.title || item.name}" 
                   onerror="this.src='https://via.placeholder.com/400x225'">
              ${isLive ? '<div class="live-badge">LIVE</div>' : ''}
              ${item.requires_premium ? '<div class="premium-badge">PREMIUM</div>' : ''}
              <div class="card-content">
                <h3 class="card-title">${item.title || item.name}</h3>
                <div class="card-meta">
                  <span>${item.category || 'Sports'}</span>
                  <span class="card-views">${isLive ? `${item.viewers_count || 0} watching` : `${item.views_count || item.view_count || 0} views`}</span>
                </div>
              </div>
            </div>
          `;
          
          container.appendChild(card);
        });
        
      } catch (error) {
        console.error('Error loading featured content:', error);
        const container = document.getElementById('featured-content');
        container.innerHTML = '<p class="error-message">Failed to load featured content. Please try again later.</p>';
      }
    }
    
    // Load upcoming events
    async function loadUpcomingEvents(filter = 'today') {
      try {
        const API_BASE = 'https://pegasus-backend.super-elmore95.workers.dev';
        const container = document.getElementById('upcoming-events-container');
        
        // Show loading state
        container.innerHTML = `
          <div class="loading-placeholder">
            <div class="loading-spinner"></div>
            <p>Loading upcoming events...</p>
          </div>
        `;
        
        // In a real implementation, you would filter by date based on the filter parameter
        const response = await fetch(`${API_BASE}/api/content?type=live&is_upcoming=true`);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const content = await response.json();
        const upcomingEvents = content.live || [];
        
        // Clear loading state
        container.innerHTML = '';
        
        if (upcomingEvents.length === 0) {
          container.innerHTML = '<p class="no-content">No upcoming events found.</p>';
          return;
        }
        
        // Display events
        upcomingEvents.forEach(event => {
          const eventDate = new Date(event.start_time || event.created_at);
          const formattedDate = eventDate.toLocaleDateString('en-US', { 
            weekday: 'short', 
            month: 'short', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          const card = document.createElement('div');
          card.className = 'event-card';
          
          card.innerHTML = `
            <div class="event-date">${formattedDate}</div>
            <div class="event-info">
              <div class="event-teams">
                <div class="team">
                  <div>${event.title.split(' vs ')[0] || 'Team 1'}</div>
                </div>
                <div class="vs">VS</div>
                <div class="team">
                  <div>${event.title.split(' vs ')[1] || 'Team 2'}</div>
                </div>
              </div>
              <div class="event-league">${event.category || 'Sports'}</div>
            </div>
          `;
          
          container.appendChild(card);
        });
        
      } catch (error) {
        console.error('Error loading upcoming events:', error);
        const container = document.getElementById('upcoming-events-container');
        container.innerHTML = '<p class="error-message">Failed to load upcoming events. Please try again later.</p>';
      }
    }
    
// In explore.html, update the loadMMAFightCards function
async function loadMMAFightCards() {
  try {
    const API_BASE = 'https://pegasus-backend.super-elmore95.workers.dev';
    const container = document.getElementById('mma-fight-cards-container');
    
    // Show loading state
    container.innerHTML = `
      <div class="loading-placeholder">
        <div class="loading-spinner"></div>
        <p>Loading MMA fight cards...</p>
      </div>
    `;
    
    // Get MMA content from backend
    const response = await fetch(`${API_BASE}/api/content?category=MMA`);
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const content = await response.json();
    
    // Clear loading state
    container.innerHTML = '';
    
    if (!content.vod || content.vod.length === 0) {
      container.innerHTML = '<p class="no-content">No MMA content available at the moment.</p>';
      return;
    }
    
    // Create fight card structure
    const fightCard = document.createElement('div');
    fightCard.className = 'fight-card';
    
    fightCard.innerHTML = `
      <div class="fight-card-header">
        <span>UFC Fight Night</span>
        <span>December 15, 2023</span>
      </div>
      <div class="fight-card-content">
        ${content.vod.map(item => `
          <div class="fight">
            <div class="fighter">
              <div class="fighter-name">${item.title.split(' vs ')[0] || 'Fighter 1'}</div>
              <div class="fighter-record">22-5-0</div>
            </div>
            <div class="weight-class">Lightweight</div>
            <div class="fighter">
              <div class="fighter-name">${item.title.split(' vs ')[1] || 'Fighter 2'}</div>
              <div class="fighter-record">18-3-0</div>
            </div>
          </div>
        `).join('')}
      </div>
    `;
    
    container.appendChild(fightCard);
    
  } catch (error) {
    console.error('Error loading MMA fight cards:', error);
    const container = document.getElementById('mma-fight-cards-container');
    container.innerHTML = '<p class="error-message">Failed to load MMA content. Please try again later.</p>';
  }
}
  </script>
</body>
</html>

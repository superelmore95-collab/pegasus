<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PEGASUS Admin Panel</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --admin-primary: #0a0a12;
      --admin-secondary: #141420;
      --admin-accent: #ff003c;
      --admin-accent-light: #ff2d5f;
      --admin-text: #ffffff;
      --admin-text-secondary: #b3b3b3;
      --admin-success: #00c853;
      --admin-warning: #ffab00;
      --admin-danger: #ff1744;
      --admin-card-bg: #1a1a2e;
      --admin-sidebar-width: 250px;
      --admin-header-height: 70px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--admin-primary);
      color: var(--admin-text);
      overflow-x: hidden;
    }

    .admin-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar Styles */
    .admin-sidebar {
      width: var(--admin-sidebar-width);
      background: var(--admin-secondary);
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      padding: 20px 0;
      overflow-y: auto;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .admin-sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .admin-sidebar-header img {
      height: 30px;
    }

    .admin-sidebar-menu {
      list-style: none;
    }

    .admin-sidebar-menu li {
      margin-bottom: 5px;
    }

    .admin-sidebar-menu a {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--admin-text);
      text-decoration: none;
      transition: all 0.3s ease;
      gap: 10px;
    }

    .admin-sidebar-menu a:hover,
    .admin-sidebar-menu a.active {
      background: var(--admin-accent);
      color: #000;
    }

    .admin-sidebar-menu a i {
      width: 20px;
      text-align: center;
    }

    /* Main Content Styles */
    .admin-main-content {
      flex: 1;
      margin-left: var(--admin-sidebar-width);
      padding: 20px;
    }

    .admin-header {
      background: var(--admin-secondary);
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-header h1 {
      font-size: 24px;
    }

    .admin-user-menu {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .admin-user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--admin-accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    /* Dashboard Cards */
    .admin-dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .admin-card {
      background: var(--admin-card-bg);
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .admin-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .admin-card-title {
      font-size: 16px;
      color: var(--admin-text-secondary);
    }

    .admin-card-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--admin-accent);
    }

    .admin-card-value {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .admin-card-growth {
      font-size: 14px;
      color: var(--admin-success);
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* Content Management */
    .admin-content-section {
      background: var(--admin-card-bg);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .admin-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .admin-section-title {
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .admin-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--admin-accent);
      color: #000;
      font-weight: 600;
      padding: 10px 20px;
      border-radius: 4px;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .admin-btn:hover {
      background: var(--admin-accent-light);
      transform: translateY(-2px);
    }

    .admin-btn-outline {
      background: transparent;
      border: 2px solid var(--admin-accent);
      color: var(--admin-accent);
    }

    .admin-btn-outline:hover {
      background: var(--admin-accent);
      color: #000;
    }

    .admin-btn-sm {
      padding: 6px 12px;
      font-size: 14px;
    }

    /* Tables */
    .admin-table-responsive {
      overflow-x: auto;
    }

    .admin-table {
      width: 100%;
      border-collapse: collapse;
    }

    .admin-table th, 
    .admin-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .admin-table th {
      background: rgba(255, 255, 255, 0.05);
      font-weight: 600;
    }

    .admin-table tr:hover {
      background: rgba(255, 255, 255, 0.03);
    }

    .admin-status-badge {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .admin-status-live {
      background: rgba(255, 23, 68, 0.2);
      color: var(--admin-danger);
    }

    .admin-status-draft {
      background: rgba(255, 171, 0, 0.2);
      color: var(--admin-warning);
    }

    .admin-status-published {
      background: rgba(0, 200, 83, 0.2);
      color: var(--admin-success);
    }

    .admin-action-buttons {
      display: flex;
      gap: 10px;
    }

    /* Forms */
    .admin-form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .admin-form-group {
      margin-bottom: 20px;
    }

    .admin-form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .admin-form-control {
      width: 100%;
      padding: 12px 15px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      color: var(--admin-text);
      font-size: 16px;
    }

    .admin-form-control:focus {
      outline: none;
      border-color: var(--admin-accent);
    }

    textarea.admin-form-control {
      min-height: 120px;
      resize: vertical;
    }

    .admin-form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Preview Box */
    .admin-preview-box {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }

    .admin-preview-title {
      font-size: 16px;
      margin-bottom: 15px;
      color: var(--admin-text-secondary);
    }

    .admin-thumbnail-preview {
      width: 100%;
      max-width: 300px;
      border-radius: 4px;
      overflow: hidden;
    }

    .admin-thumbnail-preview img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* Tabs */
    .admin-tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .admin-tab {
      padding: 10px 20px;
      cursor: pointer;
      background: transparent;
      border: none;
      color: var(--admin-text-secondary);
      font-weight: 500;
      position: relative;
    }

    .admin-tab.active {
      color: var(--admin-accent);
    }

    .admin-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 3px;
      background: var(--admin-accent);
    }

    .admin-tab-content {
      display: none;
    }

    .admin-tab-content.active {
      display: block;
    }

    /* Responsive */
    @media (max-width: 992px) {
      .admin-sidebar {
        transform: translateX(-100%);
      }
      
      .admin-sidebar.active {
        transform: translateX(0);
      }
      
      .admin-main-content {
        margin-left: 0;
      }
      
      .admin-menu-toggle {
        display: block;
      }
    }

    /* Toggle button for mobile */
    .admin-menu-toggle {
      display: none;
      background: var(--admin-accent);
      color: #000;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 4px;
      font-size: 20px;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .admin-dashboard-cards {
        grid-template-columns: 1fr;
      }
      
      .admin-form-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-menu-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .admin-sidebar {
        width: 100%;
      }
    }

    /* Toast notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
    }

    .toast {
      padding: 15px 20px;
      margin-bottom: 10px;
      border-radius: 4px;
      color: white;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      animation: slideIn 0.3s ease;
    }

    .toast.success {
      background: var(--admin-success);
    }

    .toast.error {
      background: var(--admin-danger);
    }

    .toast.warning {
      background: var(--admin-warning);
      color: #000;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: var(--admin-card-bg);
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transform: translateY(20px);
      transition: transform 0.3s ease;
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--admin-text);
      font-size: 24px;
      cursor: pointer;
    }

    .modal-body {
      margin-bottom: 20px;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-sidebar-header">
        <img src="https://via.placeholder.com/30" alt="PEGASUS Logo">
        <h2>PEGASUS Admin</h2>
      </div>
      
      <ul class="admin-sidebar-menu">
        <li><a href="#" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
        <li><a href="#live-streams"><i class="fas fa-broadcast-tower"></i> Live Streams</a></li>
        <li><a href="#vod-content"><i class="fas fa-video"></i> VOD Content</a></li>
        <li><a href="#highlights"><i class="fas fa-star"></i> Highlights</a></li>
        <li><a href="#channels"><i class="fas fa-tv"></i> Channels</a></li>
        <li><a href="#banners"><i class="fas fa-images"></i> Banners & Hero</a></li>
        <li><a href="#users"><i class="fas fa-users"></i> Users</a></li>
        <li><a href="#subscriptions"><i class="fas fa-credit-card"></i> Subscriptions</a></li>
        <li><a href="#analytics"><i class="fas fa-chart-bar"></i> Analytics</a></li>
        <li><a href="#settings"><i class="fas fa-cog"></i> Settings</a></li>
        <li><a href="#" id="admin-logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
      </ul>
    </aside>

    <!-- Main Content -->
    <div class="admin-main-content">
      <!-- Header -->
      <div class="admin-header">
        <button class="admin-menu-toggle" id="adminMenuToggle">
          <i class="fas fa-bars"></i>
        </button>
        
        <h1>Admin Dashboard</h1>
        
        <div class="admin-user-menu">
          <div class="admin-notifications">
            <i class="fas fa-bell"></i>
          </div>
          <div class="admin-user-avatar">A</div>
        </div>
      </div>

      <!-- Dashboard Stats -->
      <div class="admin-dashboard-cards">
        <div class="admin-card">
          <div class="admin-card-header">
            <div class="admin-card-title">Live Streams</div>
            <div class="admin-card-icon">
              <i class="fas fa-broadcast-tower"></i>
            </div>
          </div>
          <div class="admin-card-value" id="live-streams-count">12</div>
          <div class="admin-card-growth">
            <i class="fas fa-arrow-up"></i> <span id="live-streams-growth">3</span> new today
          </div>
        </div>
        
        <div class="admin-card">
          <div class="admin-card-header">
            <div class="admin-card-title">VOD Content</div>
            <div class="admin-card-icon">
              <i class="fas fa-video"></i>
            </div>
          </div>
          <div class="admin-card-value" id="vod-count">47</div>
          <div class="admin-card-growth">
            <i class="fas fa-arrow-up"></i> <span id="vod-growth">8</span> new this week
          </div>
        </div>
        
        <div class="admin-card">
          <div class="admin-card-header">
            <div class="admin-card-title">Total Views</div>
            <div class="admin-card-icon">
              <i class="fas fa-eye"></i>
            </div>
          </div>
          <div class="admin-card-value" id="total-views">24.5K</div>
          <div class="admin-card-growth">
            <i class="fas fa-arrow-up"></i> <span id="views-growth">12%</span> from last week
          </div>
        </div>
        
        <div class="admin-card">
          <div class="admin-card-header">
            <div class="admin-card-title">Active Users</div>
            <div class="admin-card-icon">
              <i class="fas fa-users"></i>
            </div>
          </div>
          <div class="admin-card-value" id="active-users">1,842</div>
          <div class="admin-card-growth">
            <i class="fas fa-arrow-up"></i> <span id="online-users">243</span> currently online
          </div>
        </div>
      </div>

      <!-- Live Streams Management -->
      <div class="admin-content-section" id="live-streams-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-broadcast-tower"></i> Live Streams
          </h2>
          <button class="admin-btn" id="addLiveStreamBtn">
            <i class="fas fa-plus"></i> Add New Stream
          </button>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Category</th>
                <th>Status</th>
                <th>Viewers</th>
                <th>Start Time</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="live-streams-table-body">
              <tr>
                <td>Manchester United vs Liverpool</td>
                <td>Football</td>
                <td><span class="admin-status-badge admin-status-live">LIVE</span></td>
                <td>12.4K</td>
                <td>Today, 15:00</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>NBA Finals - Game 7</td>
                <td>Basketball</td>
                <td><span class="admin-status-badge admin-status-live">LIVE</span></td>
                <td>8.7K</td>
                <td>Today, 18:30</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>UFC Fight Night</td>
                <td>MMA</td>
                <td><span class="admin-status-badge admin-status-draft">DRAFT</span></td>
                <td>0</td>
                <td>Tomorrow, 22:00</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Users Management -->
      <div class="admin-content-section" id="users-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-users"></i> Users Management
          </h2>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Subscription</th>
                <th>Expiry Date</th>
                <th>Role</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-table-body">
              <tr>
                <td>John Smith</td>
                <td>john@example.com</td>
                <td>Premium</td>
                <td>2023-12-15</td>
                <td>User</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>Sarah Johnson</td>
                <td>sarah@example.com</td>
                <td>Basic</td>
                <td>2023-11-30</td>
                <td>User</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>Admin User</td>
                <td>admin@pegasus.com</td>
                <td>Enterprise</td>
                <td>2024-12-31</td>
                <td>Admin</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Add New Content Form (Initially Hidden) -->
      <div class="admin-content-section" id="add-content-form" style="display: none;">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-plus-circle"></i> Add New Live Stream
          </h2>
        </div>

        <div class="admin-tabs">
          <button class="admin-tab active" data-tab="basic">Basic Info</button>
          <button class="admin-tab" data-tab="embed">Embed Code</button>
          <button class="admin-tab" data-tab="thumbnail">Thumbnail</button>
          <button class="admin-tab" data-tab="schedule">Schedule</button>
        </div>

        <form id="content-form">
          <div class="admin-tab-content active" data-tab-content="basic">
            <div class="admin-form-grid">
              <div class="admin-form-group">
                <label for="streamTitle">Title *</label>
                <input type="text" id="streamTitle" class="admin-form-control" placeholder="Enter stream title" required>
              </div>
              
              <div class="admin-form-group">
                <label for="streamCategory">Category *</label>
                <select id="streamCategory" class="admin-form-control" required>
                  <option value="">Select Category</option>
                  <option value="football">Football</option>
                  <option value="basketball">Basketball</option>
                  <option value="tennis">Tennis</option>
                  <option value="formula1">Formula 1</option>
                  <option value="ufc">UFC/MMA</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>

            <div class="admin-form-group">
              <label for="streamDescription">Description</label>
              <textarea id="streamDescription" class="admin-form-control" placeholder="Enter stream description"></textarea>
            </div>
          </div>

          <div class="admin-tab-content" data-tab-content="embed">
            <div class="admin-form-group">
              <label for="embedCode">Embed Code *</label>
              <textarea id="embedCode" class="admin-form-control" placeholder="Paste your embed code here" required></textarea>
              <small>Paste the full iframe or script code provided by your streaming service</small>
            </div>
          </div>

          <div class="admin-tab-content" data-tab-content="thumbnail">
            <div class="admin-form-grid">
              <div class="admin-form-group">
                <label for="thumbnailUpload">Thumbnail Image</label>
                <input type="file" id="thumbnailUpload" class="admin-form-control" accept="image/*">
                <small>Recommended size: 400x225 pixels</small>
              </div>
              
              <div class="admin-form-group">
                <label for="thumbnailUrl">Or enter image URL</label>
                <input type="url" id="thumbnailUrl" class="admin-form-control" placeholder="https://example.com/image.jpg">
              </div>
            </div>

            <div class="admin-preview-box">
              <div class="admin-preview-title">Thumbnail Preview</div>
              <div class="admin-thumbnail-preview">
                <img src="https://via.placeholder.com/300x169" alt="Thumbnail preview" id="thumbnailPreview">
              </div>
            </div>
          </div>

          <div class="admin-tab-content" data-tab-content="schedule">
            <div class="admin-form-grid">
              <div class="admin-form-group">
                <label for="streamStatus">Status</label>
                <select id="streamStatus" class="admin-form-control">
                  <option value="draft">Draft</option>
                  <option value="scheduled">Scheduled</option>
                  <option value="live">Live</option>
                  <option value="completed">Completed</option>
                </select>
              </div>
              
              <div class="admin-form-group">
                <label for="isLive">Is Currently Live?</label>
                <select id="isLive" class="admin-form-control">
                  <option value="false">No</option>
                  <option value="true">Yes</option>
                </select>
              </div>
            </div>

            <div class="admin-form-grid">
              <div class="admin-form-group">
                <label for="startTime">Start Time</label>
                <input type="datetime-local" id="startTime" class="admin-form-control">
              </div>
              
              <div class="admin-form-group">
                <label for="endTime">End Time</label>
                <input type="datetime-local" id="endTime" class="admin-form-control">
              </div>
            </div>
          </div>

          <div class="admin-form-actions">
            <button type="button" class="admin-btn admin-btn-outline" id="cancel-form">Cancel</button>
            <button type="submit" class="admin-btn">Save Stream</button>
          </div>
        </form>
      </div>

      <!-- VOD Content Management -->
      <div class="admin-content-section" id="vod-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-video"></i> VOD Content
          </h2>
          <button class="admin-btn" id="addVodBtn">
            <i class="fas fa-plus"></i> Add VOD
          </button>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Category</th>
                <th>Views</th>
                <th>Duration</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="vod-table-body">
              <tr>
                <td>Champions League Highlights</td>
                <td>Football</td>
                <td>24.5K</td>
                <td>15:30</td>
                <td><span class="admin-status-badge admin-status-published">PUBLISHED</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>NBA Finals Game 6</td>
                <td>Basketball</td>
                <td>18.7K</td>
                <td>2:15:22</td>
                <td><span class="admin-status-badge admin-status-published">PUBLISHED</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Highlights Management -->
      <div class="admin-content-section" id="highlights-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-star"></i> Highlights
          </h2>
          <button class="admin-btn" id="addHighlightBtn">
            <i class="fas fa-plus"></i> Add Highlight
          </button>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Category</th>
                <th>Views</th>
                <th>Duration</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="highlights-table-body">
              <tr>
                <td>Top 10 Goals of the Season</td>
                <td>Football</td>
                <td>42.1K</td>
                <td>07:45</td>
                <td><span class="admin-status-badge admin-status-published">PUBLISHED</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>Best Dunks of the Week</td>
                <td>Basketball</td>
                <td>23.8K</td>
                <td>05:22</td>
                <td><span class="admin-status-badge admin-status-published">PUBLISHED</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Hero Banners Management -->
      <div class="admin-content-section" id="banners-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-images"></i> Hero Banners
          </h2>
          <button class="admin-btn" id="addBannerBtn">
            <i class="fas fa-plus"></i> Add Banner
          </button>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Type</th>
                <th>Status</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="banners-table-body">
              <tr>
                <td>Summer Sports Festival</td>
                <td>Hero</td>
                <td><span class="admin-status-badge admin-status-published">ACTIVE</span></td>
                <td>2023-06-01</td>
                <td>2023-08-31</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>Champions League Final</td>
                <td>Promo</td>
                <td><span class="admin-status-badge admin-status-draft">INACTIVE</span></td>
                <td>2023-05-28</td>
                <td>2023-06-05</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Channels Management -->
      <div class="admin-content-section" id="channels-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-tv"></i> Channels
          </h2>
          <button class="admin-btn" id="addChannelBtn">
            <i class="fas fa-plus"></i> Add Channel
          </button>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Status</th>
                <th>Viewers</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="channels-table-body">
              <tr>
                <td>Premier League Channel</td>
                <td>Football</td>
                <td><span class="admin-status-badge admin-status-live">LIVE</span></td>
                <td>3.4K</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>NBA TV International</td>
                <td>Basketball</td>
                <td><span class="admin-status-badge admin-status-live">LIVE</span></td>
                <td>2.1K</td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Subscriptions Management -->
      <div class="admin-content-section" id="subscriptions-section">
        <div class="admin-section-header">
          <h2 class="admin-section-title">
            <i class="fas fa-credit-card"></i> Subscriptions
          </h2>
          <button class="admin-btn" id="addPlanBtn">
            <i class="fas fa-plus"></i> Add Plan
          </button>
        </div>

        <div class="admin-table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Plan Name</th>
                <th>Monthly Price</th>
                <th>Yearly Price</th>
                <th>Active Users</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="subscriptions-table-body">
              <tr>
                <td>Basic</td>
                <td>$9.99</td>
                <td>$99.99</td>
                <td>842</td>
                <td><span class="admin-status-badge admin-status-published">ACTIVE</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>Premium</td>
                <td>$14.99</td>
                <td>$149.99</td>
                <td>1,245</td>
                <td><span class="admin-status-badge admin-status-published">ACTIVE</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
              <tr>
                <td>Family</td>
                <td>$19.99</td>
                <td>$199.99</td>
                <td>567</td>
                <td><span class="admin-status-badge admin-status-published">ACTIVE</span></td>
                <td class="admin-action-buttons">
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-edit"></i></button>
                  <button class="admin-btn admin-btn-outline admin-btn-sm"><i class="fas fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirmationModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Confirm Action</h3>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to perform this action? This cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button class="admin-btn admin-btn-outline" id="modalCancel">Cancel</button>
        <button class="admin-btn" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <script>
    // API base URL - replace with your actual worker URL
    const API_BASE = 'https://pegasus-backend.super-elmore95.workers.dev';
    
    // Global state
    let currentContent = {
      live: [],
      vod: [],
      highlights: [],
      banners: [],
      users: [],
      channels: [],
      subscriptions: []
    };

    // Toast notification system
    function showToast(message, type = 'success') {
      const toastContainer = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      let icon = 'fa-check-circle';
      if (type === 'error') icon = 'fa-exclamation-circle';
      if (type === 'warning') icon = 'fa-exclamation-triangle';
      
      toast.innerHTML = `
        <i class="fas ${icon}"></i>
        <span>${message}</span>
      `;
      
      toastContainer.appendChild(toast);
      
      // Remove toast after 5 seconds
      setTimeout(() => {
        toast.remove();
      }, 5000);
    }

    // Modal system
    const confirmationModal = document.getElementById('confirmationModal');
    const modalClose = document.getElementById('modalClose');
    const modalCancel = document.getElementById('modalCancel');
    const modalConfirm = document.getElementById('modalConfirm');
    
    function showModal() {
      confirmationModal.classList.add('active');
    }
    
    function hideModal() {
      confirmationModal.classList.remove('active');
    }
    
    modalClose.addEventListener('click', hideModal);
    modalCancel.addEventListener('click', hideModal);
    
    // Initialize the admin panel
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is admin
      const user = JSON.parse(localStorage.getItem('pegasus_user') || '{}');
      if (user.role !== 'admin') {
        alert('Admin access required');
        window.location.href = 'index.html';
        return;
      }
      
      // Initialize the admin panel
      initAdminPanel();
      
      // Load initial data
      loadDashboardData();
      loadContentData();
      loadUsers();
      loadSubscriptions();
    });

    function initAdminPanel() {
      // Mobile menu toggle
      const menuToggle = document.getElementById('adminMenuToggle');
      const sidebar = document.querySelector('.admin-sidebar');
      
      menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('active');
      });
      
      // Show/hide add content form
      const addLiveStreamBtn = document.getElementById('addLiveStreamBtn');
      const addContentForm = document.getElementById('add-content-form');
      const cancelFormBtn = document.getElementById('cancel-form');
      
      addLiveStreamBtn.addEventListener('click', function() {
        addContentForm.style.display = 'block';
        // Scroll to form
        addContentForm.scrollIntoView({ behavior: 'smooth' });
      });
      
      cancelFormBtn.addEventListener('click', function() {
        addContentForm.style.display = 'none';
        document.getElementById('content-form').reset();
      });
      
      // Tab functionality
      const tabs = document.querySelectorAll('.admin-tab');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          
          // Deactivate all tabs
          tabs.forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.admin-tab-content').forEach(t => t.classList.remove('active'));
          
          // Activate current tab
          this.classList.add('active');
          document.querySelector(`[data-tab-content="${tabName}"]`).classList.add('active');
        });
      });
      
      // Thumbnail preview
      const thumbnailUpload = document.getElementById('thumbnailUpload');
      const thumbnailPreview = document.getElementById('thumbnailPreview');
      const thumbnailUrl = document.getElementById('thumbnailUrl');
      
      thumbnailUpload.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            thumbnailPreview.src = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      });
      
      thumbnailUrl.addEventListener('input', function() {
        if (this.value) {
          thumbnailPreview.src = this.value;
        }
      });
      
      // Form submission
      const contentForm = document.getElementById('content-form');
      
      contentForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = {
          title: document.getElementById('streamTitle').value,
          description: document.getElementById('streamDescription').value,
          embed_code: document.getElementById('embedCode').value,
          category: document.getElementById('streamCategory').value,
          status: document.getElementById('streamStatus').value,
          is_live: document.getElementById('isLive').value === 'true',
          start_time: document.getElementById('startTime').value,
          end_time: document.getElementById('endTime').value,
          thumbnail: document.getElementById('thumbnailUrl').value || await uploadThumbnail()
        };
        
        try {
          const token = localStorage.getItem('pegasus_token');
          const response = await fetch(`${API_BASE}/api/admin/live`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify(formData),
          });
          
          if (response.ok) {
            showToast('Live stream added successfully!');
            addContentForm.style.display = 'none';
            contentForm.reset();
            thumbnailPreview.src = 'https://via.placeholder.com/300x169';
            
            // Reload the content
            loadContentData();
          } else {
            showToast('Error adding live stream', 'error');
          }
        } catch (error) {
          console.error('Error:', error);
          showToast('Error adding live stream', 'error');
        }
      });
      
      // Logout functionality
      document.getElementById('admin-logout').addEventListener('click', function(e) {
        e.preventDefault();
        
        modalConfirm.textContent = 'Logout';
        modalConfirm.onclick = function() {
          // Clear any admin session data
          localStorage.removeItem('pegasus_token');
          localStorage.removeItem('pegasus_user');
          // Redirect to login page or home page
          window.location.href = 'index.html';
          hideModal();
        };
        
        showModal();
      });
    }

    async function loadDashboardData() {
      try {
        const response = await fetch(`${API_BASE}/api/stats`);
        const data = await response.json();
        
        // Update dashboard cards
        document.getElementById('live-streams-count').textContent = data.live_streams_count || 0;
        document.getElementById('live-streams-growth').textContent = data.live_streams_growth || 0;
        document.getElementById('vod-count').textContent = data.vod_count || 0;
        document.getElementById('vod-growth').textContent = data.vod_growth || 0;
        document.getElementById('total-views').textContent = data.total_views ? formatNumber(data.total_views) : 0;
        document.getElementById('views-growth').textContent = data.views_growth ? `${data.views_growth}%` : '0%';
        document.getElementById('active-users').textContent = data.active_users ? formatNumber(data.active_users) : 0;
        document.getElementById('online-users').textContent = data.online_users || 0;
      } catch (error) {
        console.error('Error loading dashboard data:', error);
        // Use fallback data
        document.getElementById('live-streams-count').textContent = '12';
        document.getElementById('live-streams-growth').textContent = '3';
        document.getElementById('vod-count').textContent = '47';
        document.getElementById('vod-growth').textContent = '8';
        document.getElementById('total-views').textContent = '24.5K';
        document.getElementById('views-growth').textContent = '12%';
        document.getElementById('active-users').textContent = '1,842';
        document.getElementById('online-users').textContent = '243';
      }
    }

    async function loadContentData() {
      try {
        const response = await fetch(`${API_BASE}/api/content`);
        const content = await response.json();
        
        // Store content globally
        currentContent = content;
        
        // Update live streams table
        updateLiveStreamsTable(content.live || []);
        
        // Update VOD table
        updateVodTable(content.vod || []);
        
        // Update highlights table
        updateHighlightsTable(content.highlights || []);
        
        // Update banners table if available
        if (content.banners) {
          updateBannersTable(content.banners);
        }
      } catch (error) {
        console.error('Error loading content data:', error);
        // Use fallback data (already in HTML)
      }
    }

    async function loadUsers() {
      try {
        const token = localStorage.getItem('pegasus_token');
        const response = await fetch(`${API_BASE}/api/admin/users`, {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });
        
        if (!response.ok) throw new Error('Failed to fetch users');
        
        const users = await response.json();
        currentContent.users = users;
        updateUsersTable(users);
      } catch (error) {
        console.error('Error loading users:', error);
        // Use fallback data (already in HTML)
      }
    }

    async function loadSubscriptions() {
      try {
        const token = localStorage.getItem('pegasus_token');
        const response = await fetch(`${API_BASE}/api/admin/subscriptions`, {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });
        
        if (!response.ok) throw new Error('Failed to fetch subscriptions');
        
        const subscriptions = await response.json();
        currentContent.subscriptions = subscriptions;
        updateSubscriptionsTable(subscriptions);
      } catch (error) {
        console.error('Error loading subscriptions:', error);
        // Use fallback data (already in HTML)
      }
    }

    function updateLiveStreamsTable(streams) {
      const tableBody = document.getElementById('live-streams-table-body');
      
      if (streams.length === 0) {
        // Keep the fallback data in HTML
        return;
      }
      
      tableBody.innerHTML = '';
      
      streams.forEach(stream => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${stream.title}</td>
          <td>${stream.category || 'N/A'}</td>
          <td><span class="admin-status-badge admin-status-${stream.is_live ? 'live' : 'draft'}">${stream.is_live ? 'LIVE' : 'DRAFT'}</span></td>
          <td>${stream.viewers_count ? formatNumber(stream.viewers_count) : 0}</td>
          <td>${stream.start_time ? formatDate(stream.start_time) : 'N/A'}</td>
          <td class="admin-action-buttons">
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="editStream(${stream.id})"><i class="fas fa-edit"></i></button>
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="deleteStream(${stream.id}, 'live')"><i class="fas fa-trash"></i></button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateUsersTable(users) {
      const tableBody = document.getElementById('users-table-body');
      
      if (users.length === 0) {
        // Keep the fallback data in HTML
        return;
      }
      
      tableBody.innerHTML = '';
      
      users.forEach(user => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td>${user.subscription_type || 'Free'}</td>
          <td>${user.subscription_expiry ? formatDate(user.subscription_expiry) : 'N/A'}</td>
          <td>${user.role || 'user'}</td>
          <td class="admin-action-buttons">
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="editUser(${user.id})"><i class="fas fa-edit"></i></button>
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="deleteUser(${user.id})"><i class="fas fa-trash"></i></button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateSubscriptionsTable(subscriptions) {
      const tableBody = document.getElementById('subscriptions-table-body');
      
      if (subscriptions.length === 0) {
        // Keep the fallback data in HTML
        return;
      }
      
      tableBody.innerHTML = '';
      
      subscriptions.forEach(plan => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${plan.name}</td>
          <td>${plan.price_monthly ? `${plan.price_monthly} EGP` : 'N/A'}</td>
          <td>${plan.price_yearly ? `${plan.price_yearly} EGP` : 'N/A'}</td>
          <td>${plan.active_users || 0}</td>
          <td><span class="admin-status-badge admin-status-${plan.is_active ? 'published' : 'draft'}">${plan.is_active ? 'ACTIVE' : 'INACTIVE'}</span></td>
          <td class="admin-action-buttons">
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="editPlan(${plan.id})"><i class="fas fa-edit"></i></button>
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="deletePlan(${plan.id})"><i class="fas fa-trash"></i></button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateVodTable(vods) {
      const tableBody = document.getElementById('vod-table-body');
      
      if (vods.length === 0) {
        // Keep the fallback data in HTML
        return;
      }
      
      tableBody.innerHTML = '';
      
      vods.forEach(vod => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${vod.title}</td>
          <td>${vod.category || 'N/A'}</td>
          <td>${vod.views_count ? formatNumber(vod.views_count) : 0}</td>
          <td>${vod.duration || 'N/A'}</td>
          <td><span class="admin-status-badge admin-status-published">PUBLISHED</span></td>
          <td class="admin-action-buttons">
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="editVod(${vod.id})"><i class="fas fa-edit"></i></button>
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="deleteContent(${vod.id}, 'vod')"><i class="fas fa-trash"></i></button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateHighlightsTable(highlights) {
      const tableBody = document.getElementById('highlights-table-body');
      
      if (highlights.length === 0) {
        // Keep the fallback data in HTML
        return;
      }
      
      tableBody.innerHTML = '';
      
      highlights.forEach(highlight => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${highlight.title}</td>
          <td>${highlight.category || 'N/A'}</td>
          <td>${highlight.view_count ? formatNumber(highlight.view_count) : 0}</td>
          <td>${highlight.duration || 'N/A'}</td>
          <td><span class="admin-status-badge admin-status-published">PUBLISHED</span></td>
          <td class="admin-action-buttons">
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="editHighlight(${highlight.id})"><i class="fas fa-edit"></i></button>
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="deleteContent(${highlight.id}, 'highlight')"><i class="fas fa-trash"></i></button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateBannersTable(banners) {
      const tableBody = document.getElementById('banners-table-body');
      
      if (banners.length === 0) {
        // Keep the fallback data in HTML
        return;
      }
      
      tableBody.innerHTML = '';
      
      banners.forEach(banner => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${banner.title}</td>
          <td>${banner.type || 'N/A'}</td>
          <td><span class="admin-status-badge admin-status-${banner.is_active ? 'published' : 'draft'}">${banner.is_active ? 'ACTIVE' : 'INACTIVE'}</span></td>
          <td>${banner.start_date ? formatDate(banner.start_date) : 'N/A'}</td>
          <td>${banner.end_date ? formatDate(banner.end_date) : 'N/A'}</td>
          <td class="admin-action-buttons">
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="editBanner(${banner.id})"><i class="fas fa-edit"></i></button>
            <button class="admin-btn admin-btn-outline admin-btn-sm" onclick="deleteBanner(${banner.id})"><i class="fas fa-trash"></i></button>
          </td>
        `;
        tableBody.appendChild(row);
      });
    }

    async function uploadThumbnail() {
      const fileInput = document.getElementById('thumbnailUpload');
      if (!fileInput.files[0]) return null;
      
      // In a real application, you would upload the file to your server or cloud storage
      // and return the URL. For now, we'll just return a placeholder.
      return 'https://via.placeholder.com/400x225';
    }

    function editStream(id) {
      const stream = currentContent.live.find(s => s.id === id);
      if (stream) {
        // Populate form with stream data
        document.getElementById('streamTitle').value = stream.title;
        document.getElementById('streamDescription').value = stream.description || '';
        document.getElementById('embedCode').value = stream.embed_code;
        document.getElementById('streamCategory').value = stream.category || '';
        document.getElementById('streamStatus').value = stream.status || 'draft';
        document.getElementById('isLive').value = stream.is_live ? 'true' : 'false';
        document.getElementById('startTime').value = stream.start_time || '';
        document.getElementById('endTime').value = stream.end_time || '';
        document.getElementById('thumbnailUrl').value = stream.thumbnail || '';
        
        if (stream.thumbnail) {
          document.getElementById('thumbnailPreview').src = stream.thumbnail;
        }
        
        // Show the form
        document.getElementById('add-content-form').style.display = 'block';
        document.getElementById('add-content-form').scrollIntoView({ behavior: 'smooth' });
        
        // Change form to edit mode
        const form = document.getElementById('content-form');
        form.setAttribute('data-edit-mode', 'true');
        form.setAttribute('data-edit-id', id);
        
        // Change submit button text
        form.querySelector('button[type="submit"]').textContent = 'Update Stream';
      }
    }

    async function deleteStream(id, type) {
      modalConfirm.textContent = 'Delete';
      modalConfirm.onclick = async function() {
        try {
          const token = localStorage.getItem('pegasus_token');
          const response = await fetch(`${API_BASE}/api/admin/${type}/${id}`, {
            method: 'DELETE',
            headers: {
              'Authorization': `Bearer ${token}`
            }
          });
          
          if (response.ok) {
            showToast('Stream deleted successfully!');
            loadContentData();
          } else {
            showToast('Error deleting stream', 'error');
          }
        } catch (error) {
          console.error('Error:', error);
          showToast('Error deleting stream', 'error');
        }
        hideModal();
      };
      
      showModal();
    }

    async function deleteUser(id) {
      modalConfirm.textContent = 'Delete';
      modalConfirm.onclick = async function() {
        try {
          const token = localStorage.getItem('pegasus_token');
          const response = await fetch(`${API_BASE}/api/admin/users/${id}`, {
            method: 'DELETE',
            headers: {
              'Authorization': `Bearer ${token}`
            }
          });
          
          if (response.ok) {
            showToast('User deleted successfully!');
            loadUsers();
          } else {
            showToast('Error deleting user', 'error');
          }
        } catch (error) {
          console.error('Error:', error);
          showToast('Error deleting user', 'error');
        }
        hideModal();
      };
      
      showModal();
    }

    function formatNumber(num) {
      if (num >= 1000000) {
        return (num / 1000000).toFixed(1) + 'M';
      } else if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'K';
      }
      return num;
    }

    function formatDate(dateString) {
      const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
      return new Date(dateString).toLocaleDateString(undefined, options);
    }

    // Make functions available globally for onclick attributes
    window.editStream = editStream;
    window.deleteStream = deleteStream;
    window.deleteUser = deleteUser;
    window.editVod = function(id) {
      showToast('Edit VOD functionality would be implemented here', 'warning');
    };
    window.editHighlight = function(id) {
      showToast('Edit Highlight functionality would be implemented here', 'warning');
    };
    window.editBanner = function(id) {
      showToast('Edit Banner functionality would be implemented here', 'warning');
    };
    window.editPlan = function(id) {
      showToast('Edit Plan functionality would be implemented here', 'warning');
    };
    window.deleteContent = function(id, type) {
      modalConfirm.textContent = 'Delete';
      modalConfirm.onclick = function() {
        showToast(`Delete ${type} functionality would be implemented here`, 'warning');
        hideModal();
      };
      showModal();
    };
    window.deleteBanner = function(id) {
      modalConfirm.textContent = 'Delete';
      modalConfirm.onclick = function() {
        showToast('Delete banner functionality would be implemented here', 'warning');
        hideModal();
      };
      showModal();
    };
    window.deletePlan = function(id) {
      modalConfirm.textContent = 'Delete';
      modalConfirm.onclick = function() {
        showToast('Delete plan functionality would be implemented here', 'warning');
        hideModal();
      };
      showModal();
    };
  </script>
</body>
</html>
